webpackJsonp([11],{EDnO:function(t,e,s){e=t.exports=s("BkJT")(!0),e.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",file:"CourseIssues.vue",sourceRoot:""}])},"J1+i":function(t,e,s){var a=s("EDnO");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);s("8bSs")("0f3a2a7a",a,!0)},KwZS:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"panel-body",staticStyle:{"padding-bottom":"0px"}},[s("div",{staticClass:"panel panel-default"},[s("div",{staticClass:"panel-heading"},[t._v("议题")]),t._v(" "),s("div",{staticClass:"panel-body"},[s("form",{staticClass:"form-horizontal",attrs:{id:"formSearch"}},[s("label",[t._v("议题内容")]),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.issues,expression:"issues"}],staticClass:"form-control",attrs:{id:"txt_search_departmentname",rows:"5"},domProps:{value:t.issues},on:{input:function(e){e.target.composing||(t.issues=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"panel-footer"},[0===t.state?s("button",{staticClass:"btn btn-default",attrs:{id:"btn_add",type:"button"},on:{click:function(e){t.addIssues()}}},[s("span",{staticClass:"glyphicon glyphicon-plus",attrs:{"aria-hidden":"true"}}),t._v("提交\n       ")]):t._e(),t._v(" "),1===t.state?s("button",{staticClass:"btn btn-default",attrs:{id:"btn_update",type:"button"},on:{click:function(e){t.updateIssues()}}},[s("span",{staticClass:"glyphicon glyphicon-arrow-up",attrs:{"aria-hidden":"true"}}),t._v("修改\n      ")]):t._e(),t._v(" "),s("button",{staticClass:"btn btn-default",attrs:{id:"btn_reset",type:"button"},on:{click:function(e){t.resetIssues()}}},[s("span",{staticClass:"glyphicon glyphicon glyphicon-repeat",attrs:{"aria-hidden":"true"}}),t._v("重置\n      ")])])]),t._v(" "),s("div",{staticClass:"btn-group",attrs:{id:"toolbar"}}),t._v(" "),s("table",{attrs:{id:"issuesTable"}})])},i=[],o={render:a,staticRenderFns:i};e.a=o},h4ya:function(t,e,s){"use strict";function a(t){s("J1+i")}Object.defineProperty(e,"__esModule",{value:!0});var i=s("vfOx"),o=s("KwZS"),n=s("/Xao"),u=a,r=n(i.a,o.a,!1,u,"data-v-3813f1ea",null);e.default=r.exports},vfOx:function(t,e,s){"use strict";e.a={name:"CustomModel",props:{nodeId:{type:Number,default:0}},data:function(){return{state:0,issuesTem:"",issues:"",id:0}},watch:{nodeId:function(){$("#issuesTable").bootstrapTable("refresh")}},methods:{addIssues:function(){var t=this;null!=this.issues&&""!=this.issues?axios.post("/api/addCourseIssues",{content:this.issues,nodeId:this.nodeId}).then(function(e){1===e.data.status?(bus.$emit("dialog",{type:"success",body:e.data.message,auto:!0,time:5e3}),t.resetIssues(),$("#issuesTable").bootstrapTable("refresh")):bus.$emit("dialog",{type:"error",body:e.data.value,auto:!1,time:5e3}),console.log(e)}).catch(function(t){bus.$emit("dialog",{type:"warn",body:"网络错误",auto:!1,time:5e3})}):bus.$emit("dialog",{type:"error",body:"议题内容不能为空",auto:!1,time:5e3})},deleteIssuesAfter:function(){var t=this;axios({method:"post",url:"/api/deleteIssues",data:{id:this.id,nodeId:this.nodeId}}).then(function(e){bus.$emit("dialog",{type:"success",body:e.data.message,auto:!0,time:5e3}),t.resetIssues(),$("#issuesTable").bootstrapTable("refresh")}).catch(function(t){bus.$emit("dialog",{type:"warn",body:"网络错误",auto:!1,time:5e3})})},updateIssues:function(){var t=this;axios({method:"post",url:"/api/updateIssues",data:{id:this.id,nodeId:this.nodeId,content:this.issues,description:this.markupStr,coverImgUrl:this.coverImgUrl}}).then(function(e){1===e.data.status?(bus.$emit("dialog",{type:"success",body:e.data.message,auto:!0,time:5e3}),t.resetIssues(),$("#issuesTable").bootstrapTable("refresh")):bus.$emit("dialog",{type:"error",body:e.data.value,auto:!1,time:5e3}),console.log(e)}).catch(function(t){bus.$emit("dialog",{type:"warn",body:"网络错误",auto:!1,time:5e3})})},detailsIssues:function(){var t=this;this.issuesTem.forEach(function(e,s){e.id==t.id&&(t.issues=e.content)})},resetIssues:function(){this.issues="",this.state=0}},beforeCreate:function(){},created:function(){},beforeMount:function(){},mounted:function(){function t(t,e,s){return['<button class="RoleOfinfo btn btn-info" style="margin:0 10px 0 0"  OnClick=detailsIssuesId("'+e.id+'")>查看</button>','<button class="RoleOfdelete btn btn-danger" style="margin:0 10px 0 0" OnClick=deleteIssuesModel("'+e.id+'")>删除</button>']}var e=this;$("#issuesTable").bootstrapTable({url:"/api/getCourseIssues",ajaxOptions:{headers:{token:window.sessionStorage.getItem("token")}},cache:!1,toolbar:"#toolbar",singleSelect:!0,sortName:"id",searchAlign:"left",sortOrder:"asc",striped:!0,search:!1,searchOnEnterKey:!0,showRefresh:!0,method:"post",sidePagination:"server",pagination:!0,pageNumber:"1",pageSize:"10",pageList:"[10, 25, 50, 100, All]",showToggle:!0,clickToSelect:!0,columns:[{field:"state",checkbox:!0},{field:"courseNode.title",title:"章节名称"},{field:"content",title:"议题内容"},{field:"operate",title:"操作",formatter:t}],queryParams:function(t){return t.nodeId=e.nodeId,t},responseHandler:function(t){return e.issuesTem=t.result.rows,t.result}}),window.detailsIssuesId=function(t){e.state=1,e.id=t,e.detailsIssues()},window.deleteIssuesModel=function(t){confirm("确认删除？")&&(e.id=t,e.deleteIssuesAfter())}},beforeUpdate:function(){},updated:function(){},beforeDestroy:function(){},destroyed:function(){}}}});
//# sourceMappingURL=11.3df5626219af240717fc.js.map